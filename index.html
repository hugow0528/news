<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random News Platform</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            background: linear-gradient(to bottom, #f3f4f6, #e5e7eb);
            min-height: 100vh;
            font-family: 'Inter', sans-serif;
        }
        .news-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .news-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        .spinner {
            border: 4px solid #f3f4f6;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            display: none;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center p-4">
    <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-6">Random News Platform</h1>
    <button id="get-news-btn" class="bg-blue-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-blue-700 transition duration-300">Get News</button>
    <div id="loading" class="spinner"></div>
    <div id="news-container" class="mt-8 w-full max-w-2xl"></div>

    <script>
        $(document).ready(function() {
            // API endpoint
            const apiUrl = 'http://eventregistry.org/api/v1/article/getArticles';

            // Data for the API request
            const data = {
                "query": {
                    "$query": {
                        "$and": [
                            {
                                "$or": [
                                    { "locationUri": "http://en.wikipedia.org/wiki/Hong_Kong" },
                                    { "locationUri": "http://en.wikipedia.org/wiki/United_States" }
                                ]
                            },
                            {
                                "dateStart": "2025-06-12",
                                "dateEnd": "2025-06-26",
                                "lang": "zho"
                            }
                        ]
                    }
                },
                "resultType": "articles",
                "articlesSortBy": "date",
                "apiKey": "06679a27-b484-478d-b1c2-89194ae0185d"
            };

            // Handle button click
            $('#get-news-btn').click(function() {
                // Show loading spinner
                $('#loading').show();
                $('#news-container').empty(); // Clear previous content

                $.ajax({
                    url: apiUrl,
                    type: "POST",
                    data: JSON.stringify(data),
                    contentType: "application/json",
                    success: function(response) {
                        $('#loading').hide();

                        // Check if articles are returned
                        if (response.articles && response.articles.results && response.articles.results.length > 0) {
                            // Pick a random article
                            const articles = response.articles.results;
                            const randomArticle = articles[Math.floor(Math.random() * articles.length)];

                            // Format the article date
                            const articleDate = new Date(randomArticle.dateTime).toLocaleDateString('en-US', {
                                year: 'numeric',
                                month: 'long',
                                day: 'numeric'
                            });

                            // Create the article card
                            const articleHtml = `
                                <div class="news-card bg-white rounded-lg shadow-lg p-6">
                                    ${randomArticle.image ? `<img src="${randomArticle.image}" alt="Article Image" class="w-full h-48 object-cover rounded-md mb-4">` : ''}
                                    <h2 class="text-xl md:text-2xl font-bold text-gray-800 mb-2">${randomArticle.title}</h2>
                                    <p class="text-gray-600 mb-4">${randomArticle.body.substring(0, 200)}...</p>
                                    <p class="text-sm text-gray-500 mb-2">Source: <a href="${randomArticle.url}" target="_blank" class="text-blue-600 hover:underline">${randomArticle.source.title}</a></p>
                                    <p class="text-sm text-gray-500">Published: ${articleDate}</p>
                                </div>
                            `;

                            $('#news-container').html(articleHtml);
                        } else {
                            $('#news-container').html('<p class="text-red-500 text-center">No articles found for the specified criteria.</p>');
                        }
                    },
                    error: function(xhr, status, error) {
                        $('#loading').hide();
                        $('#news-container').html(`<p class="text-red-500 text-center">Error fetching news: ${error}</p>`);
                    }
                });
            });
        });
    </script>
</body>
</html>
